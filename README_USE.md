# 古今医案查询系统

## 项目简介

古今医案查询系统是一个基于Python开发的医案管理系统，集成了传统中医医案的存储、查询、学习和管理功能。系统采用现代化的GUI界面，支持医案的增删改查、学习计划管理、浏览历史记录等功能。

## 功能特点

### 🔍 医案查询
- **按编号查询**：快速定位特定医案
- **按症状查询**：根据症状关键词模糊搜索相关医案
- **多结果显示**：支持多个查询结果的展示

### 📚 学习计划
- **医案学习队列**：将感兴趣的医案加入学习计划
- **顺序学习**：按队列顺序学习医案内容
- **计划管理**：可随时从学习计划中移除医案

### 🕒 浏览历史
- **自动记录**：自动保存用户浏览的医案记录
- **快速回查**：方便回顾之前查看的医案
- **历史管理**：支持从历史记录中添加学习计划

### ➕ 添加医案
- **完整信息录入**：支持编号、患者、症状、诊断、处方等信息
- **数据验证**：自动检查编号重复等数据问题
- **实时保存**：数据即时保存到数据库

### ✏️ 修改医案
- **灵活编辑**：支持修改除编号外的所有医案信息
- **多入口操作**：可从查询结果、浏览历史等多个入口进入编辑
- **数据同步**：修改后立即同步到数据库和内存

### 🗑️ 删除医案
- **安全删除**：提供确认机制防止误删
- **数据清理**：自动从所有相关数据结构中移除记录
- **完整性保护**：确保数据一致性

## 技术架构

### 核心数据结构
- **MedicalRecord**：医案数据类，封装医案属性
- **LinkList**：模板类单链表，存储医案库
- **LinkStack**：模板类链栈，存储用户浏览历史
- **LinkQueue**：模板类链队列，存储学习计划

### 系统架构
- **MedicalSystem**：主系统类，整合各数据结构
- **DatabaseManager**：数据库管理类，处理数据持久化
- **MedicalSystemGUI**：GUI界面类，提供用户交互

### 技术栈
- **编程语言**：Python 3.x
- **GUI框架**：Tkinter
- **数据库**：MySQL
- **数据连接**：mysql-connector-python

## 安装部署

### 环境要求
- Python 3.7+
- MySQL 5.7+
- Windows/Linux/macOS

### 安装步骤

1. **克隆项目**
```bash
git clone <项目地址>
cd medical_case_system
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **数据库初始化**
```bash
python init_database.py
```

4. **运行系统**
```bash
python main.py
```

### 数据库配置

默认数据库配置（根据实际电脑参数）：
- 主机：localhost
- 用户：root
- 密码：###
- 数据库：medical_case_system

如需修改配置，请编辑 `database.py` 文件中的 `DatabaseManager` 类。

## 使用说明

### 首次使用
1. 运行 `init_database.py` 初始化数据库和示例数据
2. 运行 `main.py` 启动系统
3. 系统将自动加载示例医案数据

### 日常使用
1. 直接运行 `main.py` 即可
2. 系统会自动连接数据库并加载数据

### 数据管理
- **重置数据库**：运行 `reset_database.py` 可清空并重新初始化数据库
- **数据备份**：建议定期备份MySQL数据库

## 项目结构

```
medical_case_system/
├── main.py                 # 主程序入口
├── medical_system.py       # 主系统类
├── data_structures.py      # 数据结构类
├── database.py             # 数据库操作类
├── gui.py                  # GUI界面类
├── init_database.py        # 数据库初始化脚本
├── reset_database.py       # 数据库重置脚本
├── requirements.txt        # 项目依赖
└── README.md               # 项目说明
```

## 核心类说明

### MedicalRecord
医案数据类，包含以下属性：
- `record_id`：医案编号
- `patient`：患者信息
- `symptoms`：症状描述
- `diagnosis`：诊断结果
- `prescription`：处方信息

### LinkList
单链表实现，用于存储医案库，支持：
- 添加、查找、更新、删除医案
- 按编号或症状查询
- 获取所有医案记录

### LinkStack
链栈实现，用于存储浏览历史，支持：
- 入栈、出栈操作
- 查看栈顶元素
- 获取所有历史记录

### LinkQueue
链队列实现，用于存储学习计划，支持：
- 入队、出队操作
- 查看队首元素
- 获取所有学习计划

## 开发指南

### 扩展功能
1. **添加新的查询方式**：在 `LinkList` 类中添加新的查询方法
2. **增加数据字段**：修改 `MedicalRecord` 类和数据库表结构
3. **优化界面**：在 `gui.py` 中调整界面布局和交互



## 故障排除

### 常见问题

1. **数据库连接失败**
   - 检查MySQL服务是否启动
   - 验证数据库配置信息
   - 运行初始化脚本创建数据库

2. **界面显示异常**
   - 检查Python和Tkinter版本
   - 验证依赖包是否安装完整

3. **数据操作失败**
   - 检查数据库权限
   - 验证数据格式是否正确

### 日志查看
系统运行时会输出详细的日志信息，包括：
- 数据库连接状态
- 数据加载情况
- 操作执行结果

## 版本历史

### v1.0.0
- 基础医案管理功能
- 查询、学习计划、浏览历史
- 图形用户界面

### v1.1.0
- 添加医案修改功能
- 增强用户体验
- 优化界面布局

### v1.2.0
- 添加医案删除功能
- 完善数据一致性保护
- 增加安全确认机制


